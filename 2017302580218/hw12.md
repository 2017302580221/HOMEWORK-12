## HomeWork12

学号：2017302580218

姓名：陈炳生

---



### P26

答：

| 行为 | 交换机表状态                     | 链路包前往        | 解释                                                   |
| ---- | -------------------------------- | ----------------- | ------------------------------------------------------ |
| B->E | 与B的MAC地址对应的交换机学习接口 | A,C,D,E,F（广播） | 交换机表是空的，所以交换机不知道与E的MAC地址对应的接口 |
| E->B | 与E的MAC地址对应的交换机学习接口 | B                 | 交换机已经知道与B的MAC地址对应的接口                   |
| A->B | 与A的MAC地址对应的交换机学习接口 | B                 | 交换机已经知道与B的MAC地址对应的接口                   |
| B->A | 表状态与以前相同。               | A                 | 交换机已经知道与A的MAC地址对应的接口                   |

### P28

答：按照题目条件，可以假设 EE部门这三台计算机的IP地址分别为：111.111.1.1、111.111.1.2、111.111.1.3。

CS部门这三台计算机(从左到右)的IP地址是：111.111.2.1、111.111.2.2、111.111.2.3。

连接到端口1的路由器接口卡可以配置为包含两个子接口IP地址：111.111.1.0和111.111.2.0。第一种是针对EE部门的子网，第二种是针对CS部门的子网。每个IP地址都与VLAN ID相关联。假设111.111.1.0与VLAN 1(任取)相关联，111.111.2.0与VLAN 2相关联。这意味着来自子网111.111.1/24的每一帧将被添加一个带有VLAN ID 1的802.1Q标记，而来自111.111.2/24的每一帧将被添加一个带有VLAN ID 2的802.1Q标记。

假设EE部门中具有IP地址111.111.1.1的主机A希望向CS部门中的主机B(111.111.2.1)发送IP数据报。主机A首先将IP数据报(目的地为111.111.2.1)封装到具有与连接到交换机端口1的路由器接口卡的MAC地址相等的目标MAC地址的帧中。一旦路由器接收到该帧，然后将其传递到IP层，该层决定通过子接口111.111.2.0将IP数据报转发到子网111.111.2/24。然后路由器将IP数据报封装成一个帧并发送到端口1。请注意，该帧有一个802.1Q标记VLAN ID 2。一旦交换机接收到帧端口1，它就知道该帧被发送到 ID为2的VLAN，因此交换机将该帧发送到位于CS部门的主机B。一旦主机B接收到此帧，它将删除802.1Q标记。



### P31

答：

本机首先在DHCP服务器发现步骤中创建一个指定为255.255.255.255（广播）的特殊IP数据报，并将其放在以太网帧中并在以太网中广播。然后，按照DHCP协议中的步骤，本机能够获得具有给定失效时间的 IP地址。

以太网上的DHCP服务器还为计算机提供了第一跳路由器的IP地址列表、本机所在子网的子网掩码以及本地DNS服务器的地址。

由于本机的ARP缓存最初是空的，本机将使用ARP协议来获取第一跳路由器和本地DNS服务器的MAC地址。

本机将首先获得想要下载的网页的IP地址。如果本地DNS服务器没有IP地址，则计算机将使用DNS协议（权威域名服务器、顶级域名服务器、根域名服务器）查找网页的IP地址。

一旦计算机拥有了网页的IP地址，如果网页不驻留在本地Web服务器中，它将通过第一跳路由器发送HTTP请求。HTTP请求消息将被分割并封装到TCP数据包中，然后进一步封装到IP数据包中，最后封装到以太网帧中。本机将以太网帧发送到第一跳路由器。一旦路由器接收到这些帧，就会将它们传递到 IP层，检查其路由表，然后将数据包从所有接口发送到正确的接口。

然后，IP包将通过互联网路由，直到它们到达Web服务器，依据这个过程本机与 web服务器通过三次握手建立起 TCP连接。

TCP连接建立后，本机发送 HTTP 请求消息，而承载网页的服务器将通过HTTP响应消息将网页发送回计算机。这些消息将被封装到TCP数据包中，然后进一步封装到IP数据包中。这些IP数据包遵循IP路由，最终到达第一跳路由器，然后路由器将这些IP数据包封装到以太网帧中，将它们转发到计算机上。